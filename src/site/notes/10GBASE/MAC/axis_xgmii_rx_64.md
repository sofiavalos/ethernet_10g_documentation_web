---
{"dg-publish":true,"permalink":"/10-gbase/mac/axis-xgmii-rx-64/"}
---

**File**: [[10GBASE/MAC/axis_xgmii_rx_64_code\|axis_xgmii_rx_64_code]]
## Diagram
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs" viewBox="0 0 905 330"><svg id="SvgjsSvg1002" width="2" height="0" focusable="false" style="overflow:hidden;top:-100%;left:-100%;position:absolute;opacity:0"><polyline id="SvgjsPolyline1003" points="275,0 290,0"></polyline><path id="SvgjsPath1004" d="M0 0 "></path></svg><rect id="SvgjsRect1006" width="360" height="150" fill="black" x="290" y="0"></rect><rect id="SvgjsRect1007" width="356" height="145" fill="#bdecb6" x="292" y="2"></rect><text id="SvgjsText1008" font-family="Helvetica" x="270" y="-5.698437500000001" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1009" dy="26" x="270" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1010" font-family="Helvetica" x="305" y="-5.698437500000001" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1011" dy="26" x="305" svgjs:data="{&quot;newLined&quot;:true}">   DATA_WIDTH </tspan></text><line id="SvgjsLine1012" x1="275" y1="15" x2="290" y2="15" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1013" font-family="Helvetica" x="270" y="14.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1014" dy="26" x="270" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1015" font-family="Helvetica" x="305" y="14.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1016" dy="26" x="305" svgjs:data="{&quot;newLined&quot;:true}">   KEEP_WIDTH </tspan></text><line id="SvgjsLine1017" x1="275" y1="35" x2="290" y2="35" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1018" font-family="Helvetica" x="270" y="34.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1019" dy="26" x="270" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1020" font-family="Helvetica" x="305" y="34.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1021" dy="26" x="305" svgjs:data="{&quot;newLined&quot;:true}">   CTRL_WIDTH </tspan></text><line id="SvgjsLine1022" x1="275" y1="55" x2="290" y2="55" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1023" font-family="Helvetica" x="270" y="54.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1024" dy="26" x="270" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1025" font-family="Helvetica" x="305" y="54.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1026" dy="26" x="305" svgjs:data="{&quot;newLined&quot;:true}">   PTP_TS_ENABLE </tspan></text><line id="SvgjsLine1027" x1="275" y1="75" x2="290" y2="75" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1028" font-family="Helvetica" x="270" y="74.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1029" dy="26" x="270" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1030" font-family="Helvetica" x="305" y="74.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1031" dy="26" x="305" svgjs:data="{&quot;newLined&quot;:true}">   PTP_TS_FMT_TOD </tspan></text><line id="SvgjsLine1032" x1="275" y1="95" x2="290" y2="95" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1033" font-family="Helvetica" x="270" y="94.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1034" dy="26" x="270" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1035" font-family="Helvetica" x="305" y="94.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1036" dy="26" x="305" svgjs:data="{&quot;newLined&quot;:true}">   PTP_TS_WIDTH </tspan></text><line id="SvgjsLine1037" x1="275" y1="115" x2="290" y2="115" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1038" font-family="Helvetica" x="270" y="114.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1039" dy="26" x="270" svgjs:data="{&quot;newLined&quot;:true}">    </tspan></text><text id="SvgjsText1040" font-family="Helvetica" x="305" y="114.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1041" dy="26" x="305" svgjs:data="{&quot;newLined&quot;:true}">   USER_WIDTH </tspan></text><line id="SvgjsLine1042" x1="275" y1="135" x2="290" y2="135" stroke-linecap="rec" stroke="black" stroke-width="5"></line><rect id="SvgjsRect1043" width="360" height="170" fill="black" x="290" y="155"></rect><rect id="SvgjsRect1044" width="356" height="165" fill="#fdfd96" x="292" y="157"></rect><text id="SvgjsText1045" font-family="Helvetica" x="270" y="149.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1046" dy="26" x="270" svgjs:data="{&quot;newLined&quot;:true}">   wire </tspan></text><text id="SvgjsText1047" font-family="Helvetica" x="305" y="149.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1048" dy="26" x="305" svgjs:data="{&quot;newLined&quot;:true}">   clk </tspan></text><line id="SvgjsLine1049" x1="275" y1="170" x2="290" y2="170" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1050" font-family="Helvetica" x="270" y="169.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1051" dy="26" x="270" svgjs:data="{&quot;newLined&quot;:true}">   wire </tspan></text><text id="SvgjsText1052" font-family="Helvetica" x="305" y="169.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1053" dy="26" x="305" svgjs:data="{&quot;newLined&quot;:true}">   rst </tspan></text><line id="SvgjsLine1054" x1="275" y1="190" x2="290" y2="190" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1055" font-family="Helvetica" x="270" y="189.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1056" dy="26" x="270" svgjs:data="{&quot;newLined&quot;:true}">   wire [DATA_WIDTH-1:0] </tspan></text><text id="SvgjsText1057" font-family="Helvetica" x="305" y="189.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1058" dy="26" x="305" svgjs:data="{&quot;newLined&quot;:true}">   xgmii_rxd </tspan></text><line id="SvgjsLine1059" x1="275" y1="210" x2="290" y2="210" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1060" font-family="Helvetica" x="270" y="209.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1061" dy="26" x="270" svgjs:data="{&quot;newLined&quot;:true}">   wire [CTRL_WIDTH-1:0] </tspan></text><text id="SvgjsText1062" font-family="Helvetica" x="305" y="209.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1063" dy="26" x="305" svgjs:data="{&quot;newLined&quot;:true}">   xgmii_rxc </tspan></text><line id="SvgjsLine1064" x1="275" y1="230" x2="290" y2="230" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1065" font-family="Helvetica" x="270" y="229.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1066" dy="26" x="270" svgjs:data="{&quot;newLined&quot;:true}">   wire [PTP_TS_WIDTH-1:0] </tspan></text><text id="SvgjsText1067" font-family="Helvetica" x="305" y="229.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1068" dy="26" x="305" svgjs:data="{&quot;newLined&quot;:true}">   ptp_ts </tspan></text><line id="SvgjsLine1069" x1="275" y1="250" x2="290" y2="250" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1070" font-family="Helvetica" x="270" y="249.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1071" dy="26" x="270" svgjs:data="{&quot;newLined&quot;:true}">   wire </tspan></text><text id="SvgjsText1072" font-family="Helvetica" x="305" y="249.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1073" dy="26" x="305" svgjs:data="{&quot;newLined&quot;:true}">   cfg_rx_enable </tspan></text><line id="SvgjsLine1074" x1="275" y1="270" x2="290" y2="270" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1075" font-family="Helvetica" x="670" y="149.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1076" dy="26" x="670" svgjs:data="{&quot;newLined&quot;:true}">   wire [DATA_WIDTH-1:0] </tspan></text><text id="SvgjsText1077" font-family="Helvetica" x="635" y="149.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1078" dy="26" x="635" svgjs:data="{&quot;newLined&quot;:true}">   m_axis_tdata </tspan></text><line id="SvgjsLine1079" x1="650" y1="170" x2="665" y2="170" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1080" font-family="Helvetica" x="670" y="169.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1081" dy="26" x="670" svgjs:data="{&quot;newLined&quot;:true}">   wire [KEEP_WIDTH-1:0] </tspan></text><text id="SvgjsText1082" font-family="Helvetica" x="635" y="169.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1083" dy="26" x="635" svgjs:data="{&quot;newLined&quot;:true}">   m_axis_tkeep </tspan></text><line id="SvgjsLine1084" x1="650" y1="190" x2="665" y2="190" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1085" font-family="Helvetica" x="670" y="189.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1086" dy="26" x="670" svgjs:data="{&quot;newLined&quot;:true}">   wire </tspan></text><text id="SvgjsText1087" font-family="Helvetica" x="635" y="189.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1088" dy="26" x="635" svgjs:data="{&quot;newLined&quot;:true}">   m_axis_tvalid </tspan></text><line id="SvgjsLine1089" x1="650" y1="210" x2="665" y2="210" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1090" font-family="Helvetica" x="670" y="209.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1091" dy="26" x="670" svgjs:data="{&quot;newLined&quot;:true}">   wire </tspan></text><text id="SvgjsText1092" font-family="Helvetica" x="635" y="209.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1093" dy="26" x="635" svgjs:data="{&quot;newLined&quot;:true}">   m_axis_tlast </tspan></text><line id="SvgjsLine1094" x1="650" y1="230" x2="665" y2="230" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1095" font-family="Helvetica" x="670" y="229.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1096" dy="26" x="670" svgjs:data="{&quot;newLined&quot;:true}">   wire [USER_WIDTH-1:0] </tspan></text><text id="SvgjsText1097" font-family="Helvetica" x="635" y="229.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1098" dy="26" x="635" svgjs:data="{&quot;newLined&quot;:true}">   m_axis_tuser </tspan></text><line id="SvgjsLine1099" x1="650" y1="250" x2="665" y2="250" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1100" font-family="Helvetica" x="670" y="249.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1101" dy="26" x="670" svgjs:data="{&quot;newLined&quot;:true}">   wire [1:0] </tspan></text><text id="SvgjsText1102" font-family="Helvetica" x="635" y="249.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1103" dy="26" x="635" svgjs:data="{&quot;newLined&quot;:true}">   start_packet </tspan></text><line id="SvgjsLine1104" x1="650" y1="270" x2="665" y2="270" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1105" font-family="Helvetica" x="670" y="269.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1106" dy="26" x="670" svgjs:data="{&quot;newLined&quot;:true}">   wire </tspan></text><text id="SvgjsText1107" font-family="Helvetica" x="635" y="269.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1108" dy="26" x="635" svgjs:data="{&quot;newLined&quot;:true}">   error_bad_frame </tspan></text><line id="SvgjsLine1109" x1="650" y1="290" x2="665" y2="290" stroke-linecap="rec" stroke="black" stroke-width="5"></line><text id="SvgjsText1110" font-family="Helvetica" x="670" y="289.3015625" font-size="20" text-anchor="start" family="Helvetica" size="20" anchor="start" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1111" dy="26" x="670" svgjs:data="{&quot;newLined&quot;:true}">   wire </tspan></text><text id="SvgjsText1112" font-family="Helvetica" x="635" y="289.3015625" font-size="20" text-anchor="end" family="Helvetica" size="20" anchor="end" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}"><tspan id="SvgjsTspan1113" dy="26" x="635" svgjs:data="{&quot;newLined&quot;:true}">   error_bad_fcs </tspan></text><line id="SvgjsLine1114" x1="650" y1="310" x2="665" y2="310" stroke-linecap="rec" stroke="black" stroke-width="5"></line></svg>
## Hierarchical structure
![axis_xgmii_rx_compuesto.png](/img/user/10GBASE/MAC/axis_xgmii_rx_compuesto.png)
## Description

Modulo que convierte interfaz [[Abbreviations#XGMII\|XGMII]] a [[Abbreviations#AXI\|AXI]]

## Generics

| Generic name   | Type | Value                                  | Description                                                            |
| -------------- | ---- | -------------------------------------- | ---------------------------------------------------------------------- |
| DATA_WIDTH     |      | 64                                     | Parametro que define el tamaño de los datos                            |
| KEEP_WIDTH     |      | (DATA_WIDTH/8)                         | Cantidad de bytes de datos que deben ser validos                       |
| CTRL_WIDTH     |      | (DATA_WIDTH/8)                         | Cantidad de bits de control                                            |
| PTP_TS_ENABLE  |      | 0                                      | Flag para habilitar protocolo PTP                                      |
| PTP_TS_FMT_TOD |      | 1                                      | Flag para cambiar el formato de la marca de tiempo según "Time of day" |
| PTP_TS_WIDTH   |      | PTP_TS_FMT_TOD ? 96 : 64               | Parametro del ancho de la marca del tiempo                             |
| USER_WIDTH     |      | (PTP_TS_ENABLE ? PTP_TS_WIDTH : 0) + 1 | Parametro que define el ancho de los datos de usuario                  |

## Ports

| Port name       | Direction | Type                    | Description                                                          |
| --------------- | --------- | ----------------------- | -------------------------------------------------------------------- |
| clk             | input     | wire                    | Señal de clock                                                       |
| rst             | input     | wire                    | Señal de reset                                                       |
| xgmii_rxd       | input     | wire [DATA_WIDTH-1:0]   | Entrada de datos de interfaz [[Abbreviations#XGMII\|XGMII]]          |
| xgmii_rxc       | input     | wire [CTRL_WIDTH-1:0]   | Entrada de control de interfaz [[Abbreviations#XGMII\|XGMII]]        |
| m_axis_tdata    | output    | wire [DATA_WIDTH-1:0]   | Salida de datos de la interfaz [[Abbreviations#AXI\|AXI]]            |
| m_axis_tkeep    | output    | wire [KEEP_WIDTH-1:0]   | Salida de bits válidos de la interfaz [[Abbreviations#AXI\|AXI]]     |
| m_axis_tvalid   | output    | wire                    | Señal de datos válidos de la interfaz [[Abbreviations#AXI\|AXI]]     |
| m_axis_tlast    | output    | wire                    | Señal de fin de trama de la interfaz [[Abbreviations#AXI\|AXI]]      |
| m_axis_tuser    | output    | wire [USER_WIDTH-1:0]   | Salida de datos de usuario de la interfaz [[Abbreviations#AXI\|AXI]] |
| ptp_ts          | input     | wire [PTP_TS_WIDTH-1:0] | Entrada de marca de tiempo PTP                                       |
| cfg_rx_enable   | input     | wire                    | Señal de configuración para habilitar recepción                      |
| start_packet    | output    | wire [1:0]              | Estado indicando inicio de paquete                                   |
| error_bad_frame | output    | wire                    | Señal de error para trama incorrecta                                 |
| error_bad_fcs   | output    | wire                    | Señal de error para [FCS](Abbreviations.md#FCS) incorrecto           |

## Signals

| Name                                  | Type                   | Description                                                                         |
| ------------------------------------- | ---------------------- | ----------------------------------------------------------------------------------- |
| state_reg = STATE_IDLE                | reg [1:0]              | Registro de estado actual y siguiente                                               |
| state_next                            | reg [1:0]              | Registro de estado actual y siguiente                                               |
| reset_crc                             | reg                    | Señal para resetear el cálculo de [CRC](Abbreviations.md#CRC)                       |
| lanes_swapped = 1'b0                  | reg                    | Flag que indica de si los lanes están intercambiados                                |
| swap_rxd = 32'd0                      | reg [31:0]             | Registro para el intercambio de datos RXD                                           |
| swap_rxc = 4'd0                       | reg [3:0]              | Registro para el intercambio de control RXC                                         |
| swap_rxc_term = 4'd0                  | reg [3:0]              | Registro para el intercambio de control RXC para término de trama                   |
| xgmii_rxd_masked = {DATA_WIDTH{1'b0}} | reg [DATA_WIDTH-1:0]   | Datos [[Abbreviations#XGMII\|XGMII]]con máscara de bits                             |
| xgmii_term = {CTRL_WIDTH{1'b0}}       | reg [CTRL_WIDTH-1:0]   | Control [[Abbreviations#XGMII\|XGMII]] para el final de trama                       |
| term_lane_reg = 0                     | reg [2:0]              | Registro para el lane del final y el lane del final del ciclo anterior              |
| term_lane_d0_reg = 0                  | reg [2:0]              | Registro para el lane del final y el lane del final del ciclo anterior              |
| term_present_reg = 1'b0               | reg                    | Registro para indicar la presencia del final de trama                               |
| framing_error_reg = 1'b0              | reg                    | Registro para indicar error de frame                                                |
| framing_error_d0_reg = 1'b0           | reg                    | Registro para indicar error de frame                                                |
| xgmii_rxd_d0 = {DATA_WIDTH{1'b0}}     | reg [DATA_WIDTH-1:0]   | Registro de datos [[Abbreviations#XGMII\|XGMII]] del ciclo anterior                 |
| xgmii_rxd_d1 = {DATA_WIDTH{1'b0}}     | reg [DATA_WIDTH-1:0]   | Registro de datos [[Abbreviations#XGMII\|XGMII]] del ciclo anterior (1 ciclo atrás) |
| xgmii_rxc_d0 = {CTRL_WIDTH{1'b0}}     | reg [CTRL_WIDTH-1:0]   | Registro de control [[Abbreviations#XGMII\|XGMII]] del ciclo anterior               |
| xgmii_start_swap = 1'b0               | reg                    | Flag para indicar inicio de trama con swap                                          |
| xgmii_start_d0 = 1'b0                 | reg                    | Flag para indicar inicio de trama en el ciclo anterior                              |
| xgmii_start_d1 = 1'b0                 | reg                    | Flag para indicar inicio de trama en el ciclo anterior (1 ciclo atrás)              |
| m_axis_tdata_reg = {DATA_WIDTH{1'b0}} | reg [DATA_WIDTH-1:0]   | Registro de datos de salida [[Abbreviations#AXI\|AXI]]                              |
| m_axis_tdata_next                     | reg [DATA_WIDTH-1:0]   | Registro de datos de salida [[Abbreviations#AXI\|AXI]]                              |
| m_axis_tkeep_reg = {KEEP_WIDTH{1'b0}} | reg [KEEP_WIDTH-1:0]   | Registro de bits válidos de salida [[Abbreviations#AXI\|AXI]]                       |
| m_axis_tkeep_next                     | reg [KEEP_WIDTH-1:0]   | Registro de bits válidos de salida [[Abbreviations#AXI\|AXI]]                       |
| m_axis_tvalid_reg = 1'b0              | reg                    | Registro de señal de datos válidos de salida [[Abbreviations#AXI\|AXI]]             |
| m_axis_tvalid_next                    | reg                    | Registro de señal de datos válidos de salida [[Abbreviations#AXI\|AXI]]             |
| m_axis_tlast_reg = 1'b0               | reg                    | Registro de señal de fin de trama de salida [[Abbreviations#AXI\|AXI]]              |
| m_axis_tlast_next                     | reg                    | Registro de señal de fin de trama de salida [[Abbreviations#AXI\|AXI]]              |
| m_axis_tuser_reg = {USER_WIDTH{1'b0}} | reg [USER_WIDTH-1:0]   | Registro de datos de usuario de salida [[Abbreviations#AXI\|AXI]]                   |
| m_axis_tuser_next                     | reg [USER_WIDTH-1:0]   | Registro de datos de usuario de salida [[Abbreviations#AXI\|AXI]]                   |
| start_packet_reg = 2'b00              | reg [1:0]              | Registro de estado indicando inicio de paquete                                      |
| error_bad_frame_reg = 1'b0            | reg                    | Registro de señal de error para trama incorrecta                                    |
| error_bad_frame_next                  | reg                    | Registro de señal de error para trama incorrecta                                    |
| error_bad_fcs_reg = 1'b0              | reg                    | Registro de señal de error para [[Abbreviations#FCS\|FCS]] incorrecto               |
| error_bad_fcs_next                    | reg                    | Registro de señal de error para [[Abbreviations#FCS\|FCS]] incorrecto               |
| ptp_ts_reg = 0                        | reg [PTP_TS_WIDTH-1:0] | Registro de marca de tiempo PTP                                                     |
| ptp_ts_adj_reg = 0                    | reg [PTP_TS_WIDTH-1:0] | Registro de marca de tiempo PTP ajustada                                            |
| ptp_ts_borrow_reg = 0                 | reg                    | Registro de deuda de marca de tiempo PTP                                            |
| crc_state = 32'hFFFFFFFF              | reg [31:0]             | Estado del [[Abbreviations#CRC\|CRC]]                                               |
| crc_next                              | wire [31:0]            | Próximo estado del [[Abbreviations#CRC\|CRC]]                                       |
| crc_valid                             | wire [7:0]             | Señales de validación del [[Abbreviations#CRC\|CRC]]                                |
| crc_valid_save                        | reg [7:0]              | Registro de señales de validación del [[Abbreviations#CRC\|CRC]]                    |
| last_ts_reg = 0                       | reg [4+16-1:0]         | Registro para el último timestamp                                                   |
| ts_inc_reg = 0                        | reg [4+16-1:0]         | Registro para el incremento del timestamp                                           |
| j                                     | integer                |                                                                                     |
| i                                     | integer                |                                                                                     |

## Constants

| Name          | Type | Value | Description                                                   |
| ------------- | ---- | ----- | ------------------------------------------------------------- |
| ETH_PRE       |      | 8'h55 | Preambulo de Ethernet                                         |
| ETH_SFD       |      | 8'hD5 | Delimitador de inicio de paquete                              |
| XGMII_IDLE    |      | 8'h07 | Estado de Idle en la interfaz [[Abbreviations#XGMII\|XGMII]]  |
| XGMII_START   |      | 8'hfb | Inicio de trama en la interfaz [[Abbreviations#XGMII\|XGMII]] |
| XGMII_TERM    |      | 8'hfd | Fin de trama en la interfaz [[Abbreviations#XGMII\|XGMII]]    |
| XGMII_ERROR   |      | 8'hfe | Error en la interfaz [[Abbreviations#XGMII\|XGMII]]           |
| STATE_IDLE    |      | 2'd0  | Estado [[10GBASE/MAC/IDLE\|IDLE]]                                               |
| STATE_PAYLOAD |      | 2'd1  | Estado [[10GBASE/MAC/PAYLOAD\|PAYLOAD]]                                            |
| STATE_LAST    |      | 2'd2  | Estado [[10GBASE/MAC/LAST\|LAST]]                                               |

## Processes
- unnamed: ( @* )
  - **Type:** always
  - **Description**
  Aplica mascara a los datos de entrada 
- unnamed: ( @* )
  - **Type:** always
  - **Description**
  Gestiona estados como la espera de inicio de paquetes, la lectura de la carga útil del paquete, y la verificación y manejo de errores, incluido el [[Abbreviations#CRC\|CRC]]
- unnamed: ( @(posedge clk) )
  - **Type:** always
  - **Description**
  Realiza la asignación de datos según las diferentes condiciones de intercambio de lanes y marcas de tiempo PTP 

## Instantiations

- eth_crc: [[10GBASE/PCS/lfsr\|lfsr]]
  -  Instanciacion del lsfr para calcular el [[Abbreviations#CRC\|CRC]]
## State machines

- Gestiona estados como la espera de inicio de paquetes, la lectura de la carga útil del paquete, y la verificación y manejo de errores, incluido el [[Abbreviations#CRC\|CRC]]
<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><!-- Generated by graphviz version 2.40.1 (20161225.0304) --><!-- Title: state transitions Pages: 1 --><svg width="718pt" height="294pt" viewBox="0.00 0.00 718.37 294.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 290)"><title>state transitions</title><polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-290 714.374,-290 714.374,4 -4,4"/><g id="clust1" class="cluster state regular"><title>cluster_state_next</title><path fill="none" stroke="#000000" stroke-width="2" d="M20,-8C20,-8 595,-8 595,-8 601,-8 607,-14 607,-20 607,-20 607,-266 607,-266 607,-272 601,-278 595,-278 595,-278 20,-278 20,-278 14,-278 8,-272 8,-266 8,-266 8,-20 8,-20 8,-14 14,-8 20,-8"/><text text-anchor="start" x="280.3208" y="-259.2" font-family="Helvetica,sans-Serif" font-size="12.00" fill="#000000">state_next</text></g><!-- state_next --><!-- STATE_IDLE --><g id="node2" class="node state regular"><title>STATE_IDLE</title><polygon fill="#ffffff" fill-opacity="0.003922" stroke="transparent" stroke-width="2" points="309,-240 215,-240 215,-204 309,-204 309,-240"/><text text-anchor="start" x="225.994" y="-218.2" font-family="Helvetica,sans-Serif" font-size="12.00" fill="#000000">STATE_IDLE</text><path fill="none" stroke="#000000" stroke-width="2" d="M227.3333,-205C227.3333,-205 296.6667,-205 296.6667,-205 302.3333,-205 308,-210.6667 308,-216.3333 308,-216.3333 308,-227.6667 308,-227.6667 308,-233.3333 302.3333,-239 296.6667,-239 296.6667,-239 227.3333,-239 227.3333,-239 221.6667,-239 216,-233.3333 216,-227.6667 216,-227.6667 216,-216.3333 216,-216.3333 216,-210.6667 221.6667,-205 227.3333,-205"/></g><!-- STATE_IDLE&#45;&gt;STATE_IDLE --><g id="edge2" class="edge transition"><title>STATE_IDLE&#45;&gt;STATE_IDLE</title><path fill="none" stroke="#000000" d="M309.0851,-226.8322C321.5552,-226.556 331,-224.9453 331,-222 331,-219.9291 326.3306,-218.518 319.2234,-217.7666"/><polygon fill="#000000" stroke="#000000" points="319.2741,-214.2636 309.0851,-217.1678 318.8613,-221.2514 319.2741,-214.2636"/><text text-anchor="start" x="331" y="-219" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">not (xgmii_start_d1 &amp;&amp; cfg_rx_enable) &#160;&#160;</text></g><!-- STATE_PAYLOAD --><g id="node3" class="node state regular"><title>STATE_PAYLOAD</title><polygon fill="#ffffff" fill-opacity="0.003922" stroke="transparent" stroke-width="2" points="140,-146 16,-146 16,-110 140,-110 140,-146"/><text text-anchor="start" x="26.9898" y="-124.2" font-family="Helvetica,sans-Serif" font-size="12.00" fill="#000000">STATE_PAYLOAD</text><path fill="none" stroke="#000000" stroke-width="2" d="M28.3333,-111C28.3333,-111 127.6667,-111 127.6667,-111 133.3333,-111 139,-116.6667 139,-122.3333 139,-122.3333 139,-133.6667 139,-133.6667 139,-139.3333 133.3333,-145 127.6667,-145 127.6667,-145 28.3333,-145 28.3333,-145 22.6667,-145 17,-139.3333 17,-133.6667 17,-133.6667 17,-122.3333 17,-122.3333 17,-116.6667 22.6667,-111 28.3333,-111"/></g><!-- STATE_IDLE&#45;&gt;STATE_PAYLOAD --><g id="edge1" class="edge transition"><title>STATE_IDLE&#45;&gt;STATE_PAYLOAD</title><path fill="none" stroke="#000000" d="M214.7824,-217.2281C156.9006,-210.8942 65.1813,-199.0942 54.96,-187 47.1189,-177.7221 50.3352,-165.4651 56.526,-154.5276"/><polygon fill="#000000" stroke="#000000" points="59.4727,-156.4164 61.9742,-146.1211 53.5984,-152.6093 59.4727,-156.4164"/><text text-anchor="start" x="54" y="-172" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">xgmii_start_d1 &amp;&amp; cfg_rx_enable &#160;&#160;</text></g><!-- STATE_PAYLOAD&#45;&gt;STATE_IDLE --><g id="edge3" class="edge transition"><title>STATE_PAYLOAD&#45;&gt;STATE_IDLE</title><path fill="none" stroke="#000000" d="M140.0284,-136.3184C163.5314,-141.4608 189.728,-149.7328 211,-163 224.3119,-171.3026 236.0218,-184.177 244.8525,-195.7834"/><polygon fill="#000000" stroke="#000000" points="242.0528,-197.8846 250.7556,-203.9271 247.7204,-193.7763 242.0528,-197.8846"/><text text-anchor="start" x="237" y="-172" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">framing_error_reg || framing_error_d0_reg &#160;&#160;</text></g><!-- STATE_PAYLOAD&#45;&gt;STATE_IDLE --><g id="edge4" class="edge transition"><title>STATE_PAYLOAD&#45;&gt;STATE_IDLE</title><path fill="none" stroke="#000000" d="M140.0221,-129.582C237.7139,-132.722 418.4036,-141.406 438,-163 445.1683,-170.899 444.7671,-178.7547 438,-187 423.1165,-205.1347 364.8287,-214.0456 319.3591,-218.309"/><polygon fill="#000000" stroke="#000000" points="318.94,-214.8323 309.2868,-219.1986 319.5559,-221.8052 318.94,-214.8323"/><text text-anchor="start" x="443" y="-178" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">term_lane_reg &lt;= 4 &#160;&#160;</text><text text-anchor="start" x="443" y="-166" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">term_present_reg &#160;&#160;</text></g><!-- STATE_PAYLOAD&#45;&gt;STATE_PAYLOAD --><g id="edge6" class="edge transition"><title>STATE_PAYLOAD&#45;&gt;STATE_PAYLOAD</title><path fill="none" stroke="#000000" d="M140.2751,-132.689C152.9347,-132.1782 162,-130.6152 162,-128 162,-126.1612 157.5183,-124.8425 150.4566,-124.0441"/><polygon fill="#000000" stroke="#000000" points="150.5007,-120.5383 140.2751,-123.311 149.9979,-127.5202 150.5007,-120.5383"/><text text-anchor="start" x="162" y="-131" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">not (framing_error_reg || framing_error_d0_reg) &#160;&#160;</text><text text-anchor="start" x="162" y="-119" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">not (term_present_reg) &#160;&#160;</text></g><!-- STATE_LAST --><g id="node4" class="node state regular"><title>STATE_LAST</title><polygon fill="#ffffff" fill-opacity="0.003922" stroke="transparent" stroke-width="2" points="289.5,-52 192.5,-52 192.5,-16 289.5,-16 289.5,-52"/><text text-anchor="start" x="203.826" y="-30.2" font-family="Helvetica,sans-Serif" font-size="12.00" fill="#000000">STATE_LAST</text><path fill="none" stroke="#000000" stroke-width="2" d="M204.8333,-17C204.8333,-17 277.1667,-17 277.1667,-17 282.8333,-17 288.5,-22.6667 288.5,-28.3333 288.5,-28.3333 288.5,-39.6667 288.5,-39.6667 288.5,-45.3333 282.8333,-51 277.1667,-51 277.1667,-51 204.8333,-51 204.8333,-51 199.1667,-51 193.5,-45.3333 193.5,-39.6667 193.5,-39.6667 193.5,-28.3333 193.5,-28.3333 193.5,-22.6667 199.1667,-17 204.8333,-17"/></g><!-- STATE_PAYLOAD&#45;&gt;STATE_LAST --><g id="edge5" class="edge transition"><title>STATE_PAYLOAD&#45;&gt;STATE_LAST</title><path fill="none" stroke="#000000" d="M78.5976,-109.8167C80.0116,-96.7055 84.0476,-79.5298 95.077,-69 107.7685,-56.8834 147.5055,-47.8275 182.3123,-41.966"/><polygon fill="#000000" stroke="#000000" points="183.1338,-45.3786 192.445,-40.3237 182.0139,-38.4688 183.1338,-45.3786"/><text text-anchor="start" x="95" y="-84" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">not (term_lane_reg &lt;= 4) &#160;&#160;</text><text text-anchor="start" x="95" y="-72" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">term_present_reg &#160;&#160;</text></g><!-- STATE_LAST&#45;&gt;STATE_IDLE --><g id="edge8" class="edge transition"><title>STATE_LAST&#45;&gt;STATE_IDLE</title><path fill="none" stroke="#000000" d="M289.5069,-41.2324C319.4931,-46.6914 358.3533,-55.5774 391,-69 464.8131,-99.348 505.0438,-93.3451 544,-163 549.2066,-172.3096 551.0627,-179.0065 544,-187 529.3851,-203.541 397.3866,-214.06 319.2684,-218.8929"/><polygon fill="#000000" stroke="#000000" points="318.8578,-215.4113 309.0877,-219.5095 319.2811,-222.3985 318.8578,-215.4113"/><text text-anchor="start" x="532" y="-125" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">not (xgmii_start_d1 &amp;&amp; cfg_rx_enable) &#160;&#160;</text></g><!-- STATE_LAST&#45;&gt;STATE_PAYLOAD --><g id="edge7" class="edge transition"><title>STATE_LAST&#45;&gt;STATE_PAYLOAD</title><path fill="none" stroke="#000000" d="M237.4865,-52.0142C233.9872,-65.2146 227.2979,-82.5801 215,-93 204.6161,-101.7983 177.5253,-109.5411 150.1485,-115.4921"/><polygon fill="#000000" stroke="#000000" points="149.1493,-112.1254 140.0798,-117.6022 150.5851,-118.9766 149.1493,-112.1254"/><text text-anchor="start" x="231" y="-78" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">xgmii_start_d1 &amp;&amp; cfg_rx_enable &#160;&#160;</text></g></g></svg>
